# ğŸ“š æŠ€æœ¯æ–‡æ¡£ - Technical Documentation

## ğŸ“‹ ç›®å½•

- [æ¶æ„æ¦‚è¿°](#æ¶æ„æ¦‚è¿°)
- [æŠ€æœ¯æ ˆ](#æŠ€æœ¯æ ˆ)
- [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
- [çŠ¶æ€ç®¡ç†](#çŠ¶æ€ç®¡ç†)
- [è·¯ç”±ç³»ç»Ÿ](#è·¯ç”±ç³»ç»Ÿ)
- [API é›†æˆ](#apié›†æˆ)
- [æ€§èƒ½ä¼˜åŒ–](#æ€§èƒ½ä¼˜åŒ–)
- [å®‰å…¨è€ƒè™‘](#å®‰å…¨è€ƒè™‘)

---

## æ¶æ„æ¦‚è¿°

### æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           React Application              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚      React Router (v6)            â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚   Pages & Components        â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   State Management               â”‚  â”‚
â”‚  â”‚   - Redux Toolkit (Client)       â”‚  â”‚
â”‚  â”‚   - React Query (Server)         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   Strapi CMS API      â”‚
         â”‚   (Headless Backend)  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è®¾è®¡æ¨¡å¼

- **ç»„ä»¶åŒ–è®¾è®¡** - å¯å¤ç”¨çš„ React ç»„ä»¶
- **å…³æ³¨ç‚¹åˆ†ç¦»** - çŠ¶æ€ã€UIã€é€»è¾‘åˆ†ç¦»
- **å£°æ˜å¼è·¯ç”±** - React Router v6
- **æ•°æ®é¢„åŠ è½½** - React Router loaders
- **é”™è¯¯è¾¹ç•Œ** - å…¨å±€é”™è¯¯å¤„ç†

---

## æŠ€æœ¯æ ˆ

### æ ¸å¿ƒæ¡†æ¶

| æŠ€æœ¯         | ç‰ˆæœ¬   | ç”¨é€”     |
| ------------ | ------ | -------- |
| React        | 18.3.1 | UI æ¡†æ¶  |
| Vite         | 6.1.0  | æ„å»ºå·¥å…· |
| React Router | 6.14.2 | è·¯ç”±ç®¡ç† |

### çŠ¶æ€ç®¡ç†

| æŠ€æœ¯          | ç‰ˆæœ¬   | ç”¨é€”                       |
| ------------- | ------ | -------------------------- |
| Redux Toolkit | 1.9.5  | å®¢æˆ·ç«¯çŠ¶æ€ï¼ˆè´­ç‰©è½¦ã€ç”¨æˆ·ï¼‰ |
| React Query   | 4.32.6 | æœåŠ¡ç«¯çŠ¶æ€ï¼ˆäº§å“ã€è®¢å•ï¼‰   |

### æ ·å¼

| æŠ€æœ¯         | ç‰ˆæœ¬    | ç”¨é€”            |
| ------------ | ------- | --------------- |
| Tailwind CSS | 3.4.17  | å·¥å…·ç±» CSS æ¡†æ¶ |
| DaisyUI      | 4.12.23 | ç»„ä»¶åº“          |

### å·¥å…·åº“

| æŠ€æœ¯           | ç‰ˆæœ¬   | ç”¨é€”        |
| -------------- | ------ | ----------- |
| Axios          | 1.4.0  | HTTP å®¢æˆ·ç«¯ |
| React Icons    | 4.10.1 | å›¾æ ‡åº“      |
| React Toastify | 9.1.3  | é€šçŸ¥æç¤º    |
| Day.js         | 1.11.9 | æ—¥æœŸå¤„ç†    |

---

## é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ components/          # å¯å¤ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ ErrorBoundary.jsx
â”‚   â”œâ”€â”€ Skeleton.jsx
â”‚   â”œâ”€â”€ ProductsGrid.jsx
â”‚   â””â”€â”€ ...
â”œâ”€â”€ features/           # åŠŸèƒ½æ¨¡å—ï¼ˆRedux slicesï¼‰
â”‚   â”œâ”€â”€ cart/
â”‚   â”‚   â””â”€â”€ cartSlice.js
â”‚   â””â”€â”€ user/
â”‚       â””â”€â”€ userSlice.js
â”œâ”€â”€ pages/              # é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ Landing.jsx
â”‚   â”œâ”€â”€ Products.jsx
â”‚   â””â”€â”€ ...
â”œâ”€â”€ utils/              # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ index.jsx       # APIå®¢æˆ·ç«¯ã€æ ¼å¼åŒ–å‡½æ•°
â”œâ”€â”€ assets/             # é™æ€èµ„æº
â”œâ”€â”€ App.jsx             # ä¸»åº”ç”¨ç»„ä»¶
â”œâ”€â”€ main.jsx            # å…¥å£æ–‡ä»¶
â””â”€â”€ store.js            # Redux storeé…ç½®
```

### ç»„ä»¶ç»„ç»‡åŸåˆ™

1. **æŒ‰åŠŸèƒ½åˆ†ç»„** - ç›¸å…³ç»„ä»¶æ”¾åœ¨ä¸€èµ·
2. **å¯å¤ç”¨æ€§** - ç»„ä»¶è®¾è®¡ä¸ºå¯å¤ç”¨
3. **å•ä¸€èŒè´£** - æ¯ä¸ªç»„ä»¶åªåšä¸€ä»¶äº‹
4. **Props æ¥å£æ¸…æ™°** - æ˜ç¡®çš„ Props ç±»å‹å’Œé»˜è®¤å€¼

---

## çŠ¶æ€ç®¡ç†

### æ··åˆçŠ¶æ€ç®¡ç†ç­–ç•¥

#### Redux Toolkit - å®¢æˆ·ç«¯çŠ¶æ€

**ç”¨é€”ï¼š**

- è´­ç‰©è½¦çŠ¶æ€ï¼ˆcartSliceï¼‰
- ç”¨æˆ·è®¤è¯çŠ¶æ€ï¼ˆuserSliceï¼‰
- UI ä¸»é¢˜çŠ¶æ€

**ç‰¹ç‚¹ï¼š**

- éœ€è¦å¤æ‚æ›´æ–°é€»è¾‘
- éœ€è¦çŠ¶æ€æŒä¹…åŒ–
- éœ€è¦æ—¶é—´æ—…è¡Œè°ƒè¯•

**ç¤ºä¾‹ï¼š**

```javascript
// cartSlice.js
const cartSlice = createSlice({
  name: 'cart',
  initialState: getCartFromLocalStorage(),
  reducers: {
    addItem: (state, action) => {
      /* ... */
    },
    removeItem: (state, action) => {
      /* ... */
    },
  },
})
```

#### React Query - æœåŠ¡ç«¯çŠ¶æ€

**ç”¨é€”ï¼š**

- äº§å“æ•°æ®
- è®¢å•æ•°æ®
- API å“åº”ç¼“å­˜

**ç‰¹ç‚¹ï¼š**

- è‡ªåŠ¨ç¼“å­˜ç®¡ç†
- åå°æ•°æ®åŒæ­¥
- å†…ç½® loading/error çŠ¶æ€

**ç¤ºä¾‹ï¼š**

```javascript
// Products.jsx
const productsQuery = {
  queryKey: ['products', params],
  queryFn: () => customFetch.get('/products', { params }),
}
```

### çŠ¶æ€æŒä¹…åŒ–

- **è´­ç‰©è½¦** - localStorage
- **ç”¨æˆ·ä¿¡æ¯** - localStorage
- **ä¸»é¢˜è®¾ç½®** - localStorage

---

## è·¯ç”±ç³»ç»Ÿ

### React Router v6 ç‰¹æ€§

#### æ•°æ®åŠ è½½å™¨ï¼ˆLoadersï¼‰

åœ¨è·¯ç”±å±‚é¢é¢„åŠ è½½æ•°æ®ï¼š

```javascript
export const loader =
  queryClient =>
  async ({ request }) => {
    const params = Object.fromEntries([
      ...new URL(request.url).searchParams.entries(),
    ])
    const response = await queryClient.ensureQueryData(productsQuery(params))
    return { products: response.data.data }
  }
```

#### è·¯ç”±é…ç½®

```javascript
const router = createBrowserRouter([
  {
    path: '/',
    element: <HomeLayout />,
    errorElement: <Error />,
    children: [
      {
        path: 'products',
        element: <Products />,
        loader: productsLoader(queryClient),
        errorElement: <ErrorElement />,
      },
    ],
  },
])
```

### è·¯ç”±ä¿æŠ¤

```javascript
export const loader = store => async () => {
  const user = store.getState().userState.user
  if (!user) {
    return redirect('/login')
  }
  return null
}
```

---

## API é›†æˆ

### Axios é…ç½®

**åŸºç¡€é…ç½®ï¼š**

```javascript
export const customFetch = axios.create({
  baseURL: import.meta.env.VITE_API_URL,
  timeout: 10000,
  headers: {
    'Content-Type': 'application/json',
  },
})
```

### è¯·æ±‚æ‹¦æˆªå™¨

è‡ªåŠ¨æ·»åŠ è®¤è¯ tokenï¼š

```javascript
customFetch.interceptors.request.use(config => {
  const user = JSON.parse(localStorage.getItem('user') || 'null')
  if (user?.token) {
    config.headers.Authorization = `Bearer ${user.token}`
  }
  return config
})
```

### å“åº”æ‹¦æˆªå™¨

ç»Ÿä¸€é”™è¯¯å¤„ç†ï¼š

```javascript
customFetch.interceptors.response.use(
  response => response,
  error => {
    if (error.response?.status === 401 || error.response?.status === 403) {
      localStorage.removeItem('user')
      if (window.location.pathname !== '/login') {
        window.location.href = '/login'
      }
    }
    return Promise.reject(error)
  }
)
```

### API ç«¯ç‚¹

| ç«¯ç‚¹                   | æ–¹æ³•     | ç”¨é€”         |
| ---------------------- | -------- | ------------ |
| `/products`            | GET      | è·å–äº§å“åˆ—è¡¨ |
| `/products/:id`        | GET      | è·å–äº§å“è¯¦æƒ… |
| `/auth/local`          | POST     | ç”¨æˆ·ç™»å½•     |
| `/auth/local/register` | POST     | ç”¨æˆ·æ³¨å†Œ     |
| `/orders`              | GET/POST | è®¢å•ç®¡ç†     |

---

## æ€§èƒ½ä¼˜åŒ–

### ä»£ç åˆ†å‰²

- **è·¯ç”±çº§åˆ†å‰²** - æ¯ä¸ªè·¯ç”±ç‹¬ç«‹æ‰“åŒ…
- **åŠ¨æ€å¯¼å…¥** - æŒ‰éœ€åŠ è½½ç»„ä»¶

### å›¾ç‰‡ä¼˜åŒ–

- **æ‡’åŠ è½½** - `loading="lazy"` å±æ€§
- **WebP æ ¼å¼** - ç°ä»£æµè§ˆå™¨æ”¯æŒ
- **å“åº”å¼å›¾ç‰‡** - ä¸åŒå°ºå¯¸é€‚é…

### ç¼“å­˜ç­–ç•¥

- **React Query ç¼“å­˜** - è‡ªåŠ¨ç®¡ç† API å“åº”ç¼“å­˜
- **localStorage** - å®¢æˆ·ç«¯çŠ¶æ€æŒä¹…åŒ–
- **æµè§ˆå™¨ç¼“å­˜** - é™æ€èµ„æºç¼“å­˜

### æ¸²æŸ“ä¼˜åŒ–

- **React.memo** - é˜²æ­¢ä¸å¿…è¦çš„é‡æ¸²æŸ“
- **useMemo/useCallback** - è®¡ç®—å’Œå‡½æ•°ç¼“å­˜
- **è™šæ‹Ÿæ»šåŠ¨** - å¤§é‡åˆ—è¡¨ä¼˜åŒ–ï¼ˆå¦‚éœ€è¦ï¼‰

---

## å®‰å…¨è€ƒè™‘

### è®¤è¯å®‰å…¨

- **JWT Token** - å­˜å‚¨åœ¨ localStorageï¼ˆæ³¨æ„ XSS é£é™©ï¼‰
- **Token è¿‡æœŸå¤„ç†** - è‡ªåŠ¨ç™»å‡º
- **HTTPS** - ç”Ÿäº§ç¯å¢ƒå¼ºåˆ¶ä½¿ç”¨

### è¾“å…¥éªŒè¯

- **è¡¨å•éªŒè¯** - å®¢æˆ·ç«¯éªŒè¯
- **XSS é˜²æŠ¤** - React è‡ªåŠ¨è½¬ä¹‰
- **CSRF ä¿æŠ¤** - ä½¿ç”¨ JWT token

### ç¯å¢ƒå˜é‡

- **æ•æ„Ÿä¿¡æ¯** - å­˜å‚¨åœ¨ç¯å¢ƒå˜é‡ä¸­
- **ä¸æäº¤åˆ° Git** - `.env` åœ¨ `.gitignore` ä¸­
- **ä¸åŒç¯å¢ƒé…ç½®** - å¼€å‘/ç”Ÿäº§åˆ†ç¦»

### é”™è¯¯å¤„ç†

- **ä¸æš´éœ²æ•æ„Ÿä¿¡æ¯** - é”™è¯¯æ¶ˆæ¯ç”¨æˆ·å‹å¥½
- **é”™è¯¯è¾¹ç•Œ** - é˜²æ­¢åº”ç”¨å´©æºƒ
- **æ—¥å¿—è®°å½•** - å¼€å‘ç¯å¢ƒè¯¦ç»†ï¼Œç”Ÿäº§ç¯å¢ƒç®€æ´

---

## å¼€å‘å·¥ä½œæµ

### æœ¬åœ°å¼€å‘

```bash
# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# ä»£ç æ£€æŸ¥
npm run lint

# ä»£ç æ ¼å¼åŒ–
npm run format
```

### æ„å»ºæµç¨‹

```bash
# ç”Ÿäº§æ„å»º
npm run build

# é¢„è§ˆæ„å»º
npm run preview
```

### Git å·¥ä½œæµ

1. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
2. å¼€å‘åŠŸèƒ½
3. æäº¤ä»£ç ï¼ˆConventional Commitsï¼‰
4. æ¨é€åˆ° GitHub
5. åˆ›å»º Pull Request
6. ä»£ç å®¡æŸ¥
7. åˆå¹¶åˆ°ä¸»åˆ†æ”¯

---

## æœ€ä½³å®è·µ

### ä»£ç è§„èŒƒ

- ä½¿ç”¨ ESLint å’Œ Prettier
- éµå¾ª React Hooks è§„åˆ™
- ç»„ä»¶å‘½åä½¿ç”¨ PascalCase
- æ–‡ä»¶å‘½åä½¿ç”¨ PascalCaseï¼ˆç»„ä»¶ï¼‰æˆ– camelCaseï¼ˆå·¥å…·ï¼‰

### ç»„ä»¶è®¾è®¡

- å•ä¸€èŒè´£åŸåˆ™
- Props æ¥å£æ¸…æ™°
- ä½¿ç”¨ TypeScript ç±»å‹ï¼ˆå¦‚è¿ç§»ï¼‰
- æ·»åŠ  JSDoc æ³¨é‡Š

### æ€§èƒ½ä¼˜åŒ–

- é¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“
- ä½¿ç”¨ React.memo ä¼˜åŒ–
- å›¾ç‰‡æ‡’åŠ è½½
- ä»£ç åˆ†å‰²

### é”™è¯¯å¤„ç†

- ä½¿ç”¨ Error Boundary
- å‹å¥½çš„é”™è¯¯æ¶ˆæ¯
- å¼€å‘ç¯å¢ƒè¯¦ç»†é”™è¯¯
- ç”Ÿäº§ç¯å¢ƒç”¨æˆ·å‹å¥½

---

## æ‰©å±•æŒ‡å—

### æ·»åŠ æ–°åŠŸèƒ½

1. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
2. æ·»åŠ  Redux sliceï¼ˆå¦‚éœ€è¦ï¼‰
3. åˆ›å»ºç»„ä»¶
4. æ·»åŠ è·¯ç”±
5. æ›´æ–°æ–‡æ¡£
6. ç¼–å†™æµ‹è¯•ï¼ˆå¦‚éœ€è¦ï¼‰

### é›†æˆæ–°æœåŠ¡

1. åœ¨ `utils/index.jsx` æ·»åŠ  API å‡½æ•°
2. åˆ›å»º React Query æŸ¥è¯¢
3. åœ¨ç»„ä»¶ä¸­ä½¿ç”¨
4. å¤„ç† loading å’Œ error çŠ¶æ€

---

**æœ€åæ›´æ–°ï¼š** 2024-12-11
**ç»´æŠ¤è€…ï¼š** Nordic Nest Team
